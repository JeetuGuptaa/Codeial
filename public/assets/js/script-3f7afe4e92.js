{let e=function(){let e=$("#postForm");e.submit((function(l){l.preventDefault(),$.ajax({method:"Post",url:"/post/create",data:e.serialize(),success:function(e){let l=t(e.data.post);$("#postContainer>ul").prepend(l),n($(`#${e.data.post._id}>p>a.delete-post`)),o($(`#${e.data.post._id} .create-comment`)),c($(`#${e.data.post._id}>p>a.like`)),new Noty({theme:"sunset",text:"Post Published",type:"success",layout:"topRight",timeout:1500}).show()},error:function(e){console.log(e.responseText)}})}))},t=function(e){return`\n        <li id ="${e._id}">\n            <p>\n                <small>User : ${e.user.name}</small>\n                <br>\n                ${e.content}\n                <a href ="/post/destroy/${e._id}" class ="delete-post">Delete</a>\n                <a href ="/user/like/toggleLike/?id=${e._id}&type=Post" class ="like">Like</a>\n                <small id = 'like-${e._id}'>${e.likes.length}</small>\n            </p>\n            \n            <form action="/comment/create" method="POST" class="create-comment">\n                <textarea placeholder="Type Here..." required cols="30" rows="3" name ="content"></textarea>\n                <input type='hidden' name = 'post' value ='${e._id}'>\n                <button>Reply</button>\n            </form>\n            <ul id="comment-container-${e._id}">\n            </ul>\n        </li>\n        `},n=function(e){e.click((function(e){e.preventDefault();let t=this.getAttribute("href");$.ajax({method:"delete",url:t,success:function(e){$(`#${e.data.postId}`).remove(),new Noty({theme:"sunset",text:"Post and respective comments Deleted",type:"success",layout:"topRight",timeout:1500}).show()},error:function(e){console.log(e.responseText)}})}))};n($(".delete-post")),e();let o=function(e){console.log(e),e.submit((function(t){t.preventDefault(),$.ajax({method:"post",url:"/comment/create",data:e.serialize(),success:function(e){$(`#comment-container-${e.data.comment.post._id}`).append(l(e.data.comment)),c($(`#comment-${e.data.comment._id}>a.like`)),a($(`#comment-${e.data.comment._id}>a.delete-comment`))},error:function(e){console.log(e.responseText)}})}))},l=function(e){return`<li id = "comment-${e._id}">\n        <small>User : ${e.user.name}</small>\n        <br>\n        ${e.content}\n        <a href ="/comment/destroy/?id=${e._id}&author=${e.post.user._id}" class ="delete-comment">Delete</a>\n        <a href ="/user/like/toggleLike/?id=${e._id}&type=Comment" class ="like">Like</a>\n        <small id = 'like-${e._id}'>${e.likes.length}</small>\n    </li>`},s=$(".create-comment");for(let e=0;e<s.length;e++)o(s.eq(e));let a=function(e){e.click((function(t){t.preventDefault(),$.ajax({method:"delete",url:e.attr("href"),success:function(e){$(`#comment-${e.data.comment_id}`).remove()},error:function(e){console.log(e.responseText)}})}))},i=$(".delete-comment");for(let e=0;e<i.length;e++)a(i.eq(e));let c=function(e){e.click((function(t){t.preventDefault(),$.ajax({method:"get",url:e.attr("href"),success:function(e){if(console.log(e),e.data.redirect)return void(window.location.href=e.data.redirect);let t=$(`#like-${e.data.Id}`),n=parseInt(t.text());console.log(t),e.data.deleted?(console.log(t),n--,t.text(n)):(console.log(t),n++,t.text(n))},error:function(e){console.log(e)}})}))},r=$(".like");console.log(r);for(let e=0;e<r.length;e++)c(r.eq(e))}